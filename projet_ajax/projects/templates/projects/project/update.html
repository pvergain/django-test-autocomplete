{% extends "base.html" %}
{% load static %}
{% load staticfiles %}

{# Javascript #}
{% block javascript %}
    {{ block.super }}

    {# http://code.jquery.com/ui/ #}
    <script src="http://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

{% endblock javascript %}

{# CSS #}
{% block stylesheet %}
    {{ block.super }}
    {# https://www.bootstrapcdn.com/ #}
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.csss">
{% endblock  %}

{# DOM ready #}
{% block domready %}
    {# p.155 Adding AJAX actions with jQuery, Django By Example from Antonio Mel√© #}
    {# https://www.amazon.com/Django-Example-Antonio-Mele/dp/1784391913/ #}
    $( "#id_champion_display" ).autocomplete({
          source: "{% url champion_auto_complete %}",
          selectFirst:true,
          minLength:2,
          select:function(event,ui) {
            $("#id_champion").val(ui.item.id)
          }
    });
{% endblock %}


{% block content %}

    <h1>Update of the project {{ project.title }} {{ project.champion }} </h1>

    {# https://docs.djangoproject.com/en/dev/topics/forms/ #}
    <form id="project_update" method="post" action=".">
        {% csrf_token %}
        <div class="forms">
            {{ form }}
        </div>

        <input type="submit" name="btn_update"  value="Update" class="btn btn-success btn-block" />
    </form>


    {% if messages %}
        <ul class="messages">
            {% comment %} https://getbootstrap.com/components/#alerts {% endcomment %}
            {% for message in messages %}
            <!--li{% if message.tags %} class="{{ message.tags }}"{% endif %} -->
                {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
                    <div class="alert alert-danger" role="alert">{{ message }}</div>
                {% elif message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
                    <div class="alert alert-success" role="alert">{{ message }}</div>
                {% else %}
                    <div class="alert alert-info" role="alert">{{ message }}</div>
                {% endif %}
            <!-- /li -->
            {% endfor %}
        </ul>
    {% endif %}


{% endblock content %}

