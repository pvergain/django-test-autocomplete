

.. index::
   pair: Django ; base.html
   pair: jQuery ; UI
   pair: jQuery-ui ; autocomplete


.. _autocomplete:

============================================================================
2016-10-18 try a more simple approach with jquery-ui autocomplete widget
============================================================================

.. seealso::

    - https://jqueryui.com/autocomplete/
   - http://guiqinqian.blogspot.fr/2012/01/using-jquery-auto-complete-in-django.html
   - https://github.com/jquery/jquery-ui
   

.. figure:: autocomplete_widget.png
   :align: center
     
   
.. contents::
   :depth: 3


Installation
=============

.. figure:: jenny_qian_solution.png
   :align: center
   
Other source:

- http://blog.appliedinformaticsinc.com/autocomplete-input-field-in-django-template-with-jquery-ui/


Create a ``projects`` application
==================================   


::

    python manage.py startapp projects


::

    |   ajax_selects_singers_db
    |   manage.py
    |   tree.txt
    |   
    +---projects
    |   |   admin.py
    |   |   apps.py
    |   |   models.py
    |   |   tests.py
    |   |   views.py
    |   |   __init__.py
    |   |   
    |   \---migrations
    |           __init__.py

    
Add the Django model ``Project``
================================

.. literalinclude:: ../../../../projet_ajax/projects/models.py
   :linenos:


Add the ``project`` in the INSTALLED_APPS
=========================================

::

        # # https://docs.djangoproject.com/en/dev/ref/applications/#django.apps.AppConfig
        'singers.apps.SingersConfig',
        # http://guiqinqian.blogspot.fr/2012/01/using-jquery-auto-complete-in-django.html
        'projects.apps.ProjectsConfig'
    ]


.. literalinclude:: ../../../../projet_ajax/projet_ajax/settings.py
   :linenos:


makemigrations
===============

::

    python manage.py makemigrations projects
    
::

    Migrations for 'projects':
      projects\migrations\0001_initial.py:
        - Create model Project    
        
.. literalinclude:: ../../../../projet_ajax/projects/migrations/0001_initial.py
   :linenos:

    

sqlmigrate
===========


::

    python manage.py sqlmigrate projects
    
    
::

    (ajax_django_35) C:\projects_id3\django_ajax_select\projet_ajax>python manage.py sqlmigrate projects 0001

::

    BEGIN;
    --
    -- Create model Project
    --
    CREATE TABLE "projects_project" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "title" varchar(200) NOT NULL, "champion_id" integer NOT NULL REFERENCES "auth_user" ("id"));
    CREATE INDEX "projects_project_68b9a77a" ON "projects_project" ("champion_id");
    COMMIT;    


migrate
========

::

    python manage.py migrate projects
    
    
::

    Operations to perform:
      Apply all migrations: projects
    Running migrations:
      Applying projects.0001_initial... OK
        


Create the projects/forms.py file and add 2 forms
=================================================


.. literalinclude:: ../../../../projet_ajax/projects/forms.py
   :linenos:


Create the projects/urls.py file and add the champion auto complete URL  
========================================================================


.. literalinclude:: ../../../../projet_ajax/projects/urls.py
   :linenos:


Add the ProjectUpdateView 
==========================


.. literalinclude:: ../../../../projet_ajax/projects/views.py
   :linenos:
   
   
Create the templates/projects/project/update.html django template
==================================================================

.. seealso::

   - http://code.jquery.com/ui/


This template file is used by the ProjectUpdateView.


.. figure:: jquery_ui.png
   :align: center
   

.. literalinclude:: ../../../../projet_ajax/projects/templates/projects/project/update.html
   :linenos:
   
   
Add the jquery-ui javascript code
==================================

.. seealso::

   - http://api.jqueryui.com/autocomplete/

   


::

   $( "#id_champion_display" ).autocomplete({
          source: "{% url champion_auto_complete %}",
          selectFirst:true,
          minLength:2,
          select:function(event,ui) {
            $("#id_champion").val(ui.item.id)
          }
    });   
   
   
   
   
   
   




   



 


    
        



   
       
   
   
